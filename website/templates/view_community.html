{% extends "base.html" %}
{% block title %} {{ community.name }} {% endblock %}

{% block content %}
<h2>{{ community.name }}</h2>
<p>{{ community.description }}</p>

<a href="{{ url_for('post.CreatePost', community_id=community.id) }}" 
   class="btn btn-success mb-3">
   Create Post
</a>
{% if is_admin %}
<form action="{{ url_for('community.delete_community', community_id=community.id) }}"
      method="POST"
      onsubmit="return confirm('Are you sure you want to delete this community? This action cannot be undone.');">
    <button type="submit" class="btn btn-danger">Delete Community</button>
</form>
{% endif %}




<h1 class="mb-4">Latest Post!!</h1>
{% for post in posts %}
  <a href="{{ url_for('post.ViewPost', post_id=post.id) }}" class="text-decoration-none text-dark">
    <div class="card">
      <div class="p-3 border rounded bg-light shadow-sm">
        <h5 class="mb-0 ">{{post.title}}</h5>
        <p class="card-text">
          <small class="text-body-secondary">
            By 
            <a href="{{ url_for('Profile.show_user_profile', user_id=post.user_id) }}" class="position-relative z-1">{{post.FirstName}}</a> 
            in 
            <a href="{{ url_for('community.view_community', community_id=post.community.id) }}" class="position-relative z-1">{{ post.community.name }}</a>, 
            At {{post.date.strftime("%Y-%m-%d %H:%M:%S")}}
          </small>
        </p>
        <h6 class="card-text ">{{post.content}}</h6>
        {% if post.images %}
          <img src="{{ post.images[0].name }}" alt="Post image" width="300">
        {% endif %}
      </div>
    </div>
    <div class="pt-4"></div>
  </a>
{% else %}
  <p>No posts yet. Be the first to post!</p>
{% endfor %}

{% endblock %}




